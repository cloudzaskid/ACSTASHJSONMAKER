
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AC JSON Stash Editor</title>
  <style>
    body {
      background: black;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      overflow: hidden;
    }
    .container {
      display: flex;
      height: calc(100vh - 200px);
      padding: 10px;
      border: 2px solid green;
      box-sizing: border-box;
    }
    .stash-grid {
      flex: 1;
      display: grid;
      grid-template-columns: repeat(10, 60px);
      gap: 5px;
      overflow-y: auto;
    }
    .item {
      background: #111;
      border: 1px solid #555;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      cursor: pointer;
      width: 60px;
      height: 75px;
      transition: 0.2s ease; background: #222;
    }
    .item img {
      width: 40px;
      height: 40px;
      transition: 0.2s ease; background: #222;
    }
    .footer {
      height: 60px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      background: #111;
      border-top: 2px solid green;
    }
    .controls {
      height: 140px;
      padding: 10px 20px;
      background: #111;
      border-top: 2px solid green;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .control-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    .control {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    input[type="number"] {
      width: 80px;
      background: #222;
      color: white;
      border: 1px solid #555;
      padding: 4px;
    }
    .btn {
      padding: 6px 12px;
      background: purple;
      color: white;
      border: none;
      font-size: 14px;
      cursor: pointer;
    }
    select, input[type="file"] {
      background: #222;
      color: white;
      border: 1px solid #555;
      padding: 4px;
    }
    .preview-box {
      width: 120px;
      height: 120px;
      border: 2px dashed #444;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #222;
    }
    .preview-box img {
      max-width: 100%;
      max-height: 100%;
      transform-origin: center;
      transition: 0.2s ease; background: #222;
    }
    .green-dot {
      width: 8px;
      height: 8px;
      background: lime;
      border-radius: 50%;
      position: fixed;
      pointer-events: none;
      z-index: 9999;
    }
  </style>
</head>
<body>

<div style="background: #222; color: lime; text-align: center; padding: 5px; font-size: 16px; border-bottom: 2px solid green;">
  V.1.00 UPDATE
</div>


<div class="green-dot" id="greenDot"></div>

<div class="container">
  <div class="stash-grid" id="stash-grid"></div>
</div>

<div class="footer">
  <div>
    <select id="item-select"></select>
    <button class="btn" onclick="addItem()">Add Item</button>
    <button class="btn" onclick="exportJSON()">Export JSON</button>
    <input type="file" id="import-file" onchange="importJSON(event)">
  </div>
  <div id="status">Root: none</div>
</div>

<div class="controls">
  <div class="control-group">
    <div class="control">
      <label>Size</label>
      <input type="number" id="sizeInput" value="0" min="-127" max="127" oninput="updateSelected()">
      <button onclick="randomize('size')">ðŸŽ²</button>
    </div>
    <div class="control">
      <label>Hue</label>
      <input type="number" id="hueInput" value="0" min="0" max="240" oninput="updateSelected()">
      <button onclick="randomize('hue')">ðŸŽ²</button>
    </div>
    <div class="control">
      <label>Saturation</label>
      <input type="number" id="satInput" value="0" min="-124" max="124" oninput="updateSelected()">
      <button onclick="randomize('sat')">ðŸŽ²</button>
    </div>
  </div>

  
</div>

<script>
const greenDot = document.getElementById('greenDot');
document.addEventListener('mousemove', e => {
  greenDot.style.left = `${e.clientX}px`;
  greenDot.style.top = `${e.clientY}px`;
});
document.addEventListener('touchmove', e => {
  if (e.touches.length > 0) {
    greenDot.style.left = `${e.touches[0].clientX}px`;
    greenDot.style.top = `${e.touches[0].clientY}px`;
  }
});

const itemList = ["item_apple", "item_anti_gravity_grenade", "item_arrow", "item_arrow_heart", "item_arrow_lightbulb", "item_backpack", "item_backpack_black", "item_backpack_green", "item_backpack_large_base", "item_backpack_large_clover", "item_backpack_large_basketball", "item_backpack_pink", "item_backpack_small_base", "item_backpack_white", "item_backpack_with_flashlight", "item_balloon", "item_balloon_heart", "item_banana", "item_baseball_bat", "item_big_cup", "item_boombox", "item_box_fan", "item_boombox_neon", "item_calculator", "item_cardboard_box", "item_cash", "item_cash_pile", "item_cash_mega_pile", "item_clapper", "item_cluster_grenade", "item_cola", "item_cola_large", "item_company_ration", "item_company_ration_heal", "item_cracker", "item_crate", "item_crossbow", "item_crossbow_heart", "item_crowbar", "item_disc", "item_disposable_camera", "item_dynamite", "item_dynamite_cube", "item_egg", "item_flaregun", "item_flashbang", "item_flashlight", "item_flashlight_mega", "item_flashlight_red", "item_floppy3", "item_floppy5", "item_football", "item_frying_pan", "item_glowstick", "item_goldbar", "item_grenade", "item_heart_chunk", "item_heart_gun", "item_heartchocolatebox", "item_hh_key", "item_hookshot", "item_hoverpad", "item_impulse_grenade", "item_jetpack", "item_keycard", "item_lance", "item_large_banana", "item_mug", "item_nut", "item_ogre_hands", "item_ore_copper_l", "item_ore_copper_m", "item_ore_copper_s", "item_ore_gold_l", "item_ore_gold_m", "item_ore_gold_s", "item_ore_hell", "item_ore_silver_l", "item_ore_silver_m", "item_ore_silver_s", "item_painting_canvas", "item_paperpack", "item_pelican_case", "item_pickaxe", "item_pickaxe_cny", "item_pickaxe_cube", "item_pipe", "item_plunger", "item_pogostick", "item_police_baton", "item_pumpkin_pie", "item_pumpkinjack", "item_pumpkinjack_small", "item_quiver", "item_quiver_heart", "item_radioactive_broccoli", "item_randombox_mobloot_big", "item_randombox_mobloot_medium", "item_randombox_mobloot_small", "item_randombox_mobloot_weapons", "item_revolver", "item_revolver_ammo", "item_rope", "item_rpg", "item_rpg_ammo", "item_rpg_cny", "item_rubberducky", "item_ruby", "item_saddle", "item_scanner", "item_scissors", "item_shield", "item_shield_bones", "item_shield_police", "item_shotgun", "item_shotgun_ammo", "item_shredder", "item_shrinking_broccoli", "item_snowball", "item_stapler", "item_stick_armbones", "item_stick_bone", "item_sticker_dispenser", "item_sticky_dynamite", "item_stinky_cheese", "item_tablet", "item_tapedispenser", "item_tele_grenade", "item_theremin", "item_timebomb", "item_toilet_paper", "item_toilet_paper_mega", "item_toilet_paper_roll_empty", "item_treestick", "item_tripwire_explosive", "item_trophy", "item_turkey_leg", "item_turkey_whole", "item_umbrella", "item_umbrella_clover", "item_unidentified", "item_upsidedown_loot", "item_uranium_chunk_l", "item_uranium_chunk_m", "item_uranium_chunk_s", "item_whoopie", "item_zipline_gun", "item_rpg_easter", "item_rpg_ammo_egg", "item_revolver_gold"];

const stash = [];
let selectedIndex = null;
let clipboard = null;
let rootIndex = null;

const stashGrid = document.getElementById('stash-grid');
const itemSelect = document.getElementById('item-select');
const preview = document.getElementById('preview');

itemList.forEach(id => {
  const opt = document.createElement('option');
  opt.value = id;
  opt.textContent = id;
  itemSelect.appendChild(opt);
});

function addItem() {
  const id = itemSelect.value;
  stash.push({ id, size: 0, hue: 0, saturation: 0 });
  render();
}


function render() {
  stashGrid.innerHTML = '';
  const columns = 8;
  const rows = 10;
  const maxSlots = columns * rows;

  for (let i = 0; i < maxSlots; i++) {
    const div = document.createElement('div');
    div.className = 'item';
    const label = document.createElement('div');
    label.textContent = 'slot ' + (Math.floor(i / 100) * 100 + (i % 100));
    label.style.fontSize = '10px';
    label.style.color = '#aaa';
    label.style.marginTop = '4px';

    const item = stash.find(obj => obj.stashPos === (Math.floor(i / 100) * 100 + (i % 100)));
    if (item) {
      div.style.border = '1px solid cyan';
      const name = document.createElement('div');
      name.textContent = item.id;
      name.style.fontSize = '10px';
      name.style.color = '#fff';
      div.appendChild(name);
    }

    div.appendChild(label);

    div.onclick = () => {
      const selectedID = document.getElementById('item-select').value;
      const existingIndex = stash.findIndex(obj => obj.stashPos === (Math.floor(i / 100) * 100 + (i % 100)));
      if (existingIndex !== -1) {
        stash[existingIndex] = {
          id: selectedID,
          size: 0,
          hue: 0,
          saturation: 0,
          stashPos: Math.floor(i / 100) * 100 + (i % 100)
        };
      } else {
        stash.push({
          id: selectedID,
          size: 0,
          hue: 0,
          saturation: 0,
          stashPos: Math.floor(i / 100) * 100 + (i % 100)
        });
      }
      render();
    };

    stashGrid.appendChild(div);
  }
}

  });
}

function updatePreview(item = stash[selectedIndex]) {
  if (!item) return;
  const size = parseInt(document.getElementById('sizeInput').value) || 0;
  const hue = parseInt(document.getElementById('hueInput').value) || 0;
  const sat = parseInt(document.getElementById('satInput').value) || 0;
  preview.style.transform = `scale(${1 + size / 100})`;
  preview.style.filter = `hue-rotate(${hue}deg) saturate(${1 + sat / 100})`;
}

function updateSelected() {
  const item = stash[selectedIndex];
  if (!item) return;
  item.size = parseInt(document.getElementById('sizeInput').value) || 0;
  item.hue = parseInt(document.getElementById('hueInput').value) || 0;
  item.saturation = parseInt(document.getElementById('satInput').value) || 0;
  updatePreview(item);
  render();
}

function randomize(type) {
  if (!stash[selectedIndex]) return;
  if (type === 'size') {
    stash[selectedIndex].size = Math.floor(Math.random() * 255) - 127;
  } else if (type === 'hue') {
    stash[selectedIndex].hue = Math.floor(Math.random() * 241);
  } else if (type === 'sat') {
    stash[selectedIndex].saturation = Math.floor(Math.random() * 249) - 124;
  }
  document.getElementById('sizeInput').value = stash[selectedIndex].size;
  document.getElementById('hueInput').value = stash[selectedIndex].hue;
  document.getElementById('satInput').value = stash[selectedIndex].saturation;
  updatePreview(stash[selectedIndex]);
  render();
}


function formatItem(item) {
  const formatted = {
    itemID: item.id,
    stashPos: item.stashPos,
    scaleModifier: item.size,
    colorHue: item.hue,
    colorSaturation: item.saturation
  };
  if (item.children && item.children.length > 0) {
    formatted.children = item.children.map(formatItem);
  }
  return formatted;
}

function exportJSON() {
  const formattedItems = stash.map(formatItem);
  const blob = new Blob([JSON.stringify({ version: 1, items: formattedItems }, null, 2)], { type: "application/json" });
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "stash.json";
  a.click();
}


function importJSON(e) {
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = () => {
    const data = JSON.parse(reader.result);
    stash.length = 0;
    stash.push(...data.stash);
    rootIndex = data.root;
    selectedIndex = null;
    render();
  };
  reader.readAsText(file);
}

render();
</script>

</body>
</html>
